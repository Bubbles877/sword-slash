# 剣で斬る！ - Three.js 3D Version

Three.jsを使用した3D剣斬りゲーム。マウスを素早く動かして的を斬り、スコアを競います。

## デモ

GitHub Pagesでプレイ可能です（デプロイ後）

## 特徴

### ゲームプレイ
- **3D剣アクション**: マウスの動きに追従する3D剣で敵を斬撃
- **クリティカルヒットシステム**: 33%の確率で発生する強力な一撃
  - 通常ヒット: オレンジ色のフラッシュ
  - クリティカルヒット: 赤色のフラッシュ + 大きな音 + 強いノックバック
- **コンボシステム**: 連続で斬ると得点倍率が上昇
- **スコアシステム**: コンボ数に応じて獲得スコアが増加

### ビジュアルエフェクト
- **剣のビジュアル**: 青白く光る剣身と剣筋エフェクト
- **斬撃エフェクト**:
  - 白く輝く斬撃平面
  - 色付きパーティクル（クリティカル時は赤、通常時は黄色）
  - 白い光のパーティクル
- **ヒットフラッシュ**: 敵が斬られた瞬間に色が変化し、徐々に元に戻る
- **カメラシェイク**: 斬撃時の臨場感を演出
- **六角柱の背景支柱**: サイバーな雰囲気を演出

### オーディオ
- **Web Audio API**: プロシージャルに生成される効果音
- **斬撃音**: 鋭い風切り音
- **ヒット音**: クリティカル時は通常の2.5倍の音量

## 遊び方

1. ブラウザで `index.html` を開く
2. マウスを素早く動かして黄色の敵を斬る
3. 敵は3回斬ると消えて復活する
4. コンボを繋げて高スコアを目指す

### 操作方法
- **マウス移動**: 剣の操作
- **素早いマウス移動**: 斬撃判定

## 技術スタック

### フロントエンド
- **Three.js r160**: 3Dグラフィックスレンダリング
- **Web Audio API**: リアルタイム音声生成
- **Vanilla JavaScript**: フレームワーク不使用のピュアJS実装

### 3D技術
- **PerspectiveCamera**: 視点カメラ
- **Raycasting**: マウスと3Dオブジェクトの衝突判定
- **Shadow Mapping**: リアルタイムシャドウ
- **MeshStandardMaterial**: PBRベースのマテリアル
- **Particle System**: カスタムパーティクルシステム

### アニメーション
- **Quaternion Slerp**: 滑らかな剣の回転
- **Vector3 Lerp**: 滑らかな位置補間
- **カラーブレンド**: ヒット時の色変化

## ファイル構成

```
.
├── index.html          # メインゲームファイル（HTML + CSS + JavaScript）
└── README.md          # このファイル
```

## 主要クラス

### `Target3D`
- 3Dカプセル形状の敵オブジェクト
- ヒットポイント、ノックバック、色変化を管理
- クリティカルヒット判定とビジュアルフィードバック

### `Sword3D`
- 3D剣オブジェクト
- マウスの動きに追従
- 剣先位置の追跡と軌跡エフェクト生成

### `SlashEffect`
- 斬撃時の白い楕円エフェクト
- 斬撃平面に沿って表示

### `SharpParticle`
- 斬撃時に飛び散る板状パーティクル
- 重力と回転を持つ

### `SwordTrail`
- 剣の軌跡エフェクト
- 複数のラインとチューブで構成

## カスタマイズ

### 難易度調整
```javascript
// クリティカル率（デフォルト: 33%）
this.isCritical = Math.random() < 0.33;

// 敵のヒットポイント（デフォルト: 3）
this.health = 3;
```

### ビジュアル調整
```javascript
// 剣の色
color: 0xf0f8ff,         // ベースカラー
emissive: 0xb0c0ff,      // 発光色
emissiveIntensity: 0.5,  // 発光強度

// 支柱の形状
radialSegments: 6,  // 6=六角形、8=八角形、32=円形
```

### オーディオ調整
```javascript
// クリティカルヒット音量
const volume = isCritical ? 1.5 : 0.6;

// 色の減衰速度（小さいほどゆっくり）
this.hitFlash *= 0.985;
```

## デプロイ

### GitHub Pages
1. GitHubリポジトリにプッシュ
2. Settings > Pages で main ブランチを選択
3. `index.html` が公開される

### ローカル実行
```bash
# 任意のHTTPサーバーで実行
python -m http.server 8000
# または
npx serve
```

ブラウザで `http://localhost:8000` を開く

## ブラウザ対応

- Chrome/Edge (推奨)
- Firefox
- Safari

※ Web Audio APIが有効になっている必要があります

## パフォーマンス

- 60 FPS での動作を想定
- パーティクル数: 最大130個/ヒット
- シャドウマップ解像度: 2048x2048

## ライセンス

MITライセンス

## 制作

Three.js と Web Audio API を使用した教育目的のプロジェクトです。
